(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{122:function(e,t,n){e.exports=n(307)},127:function(e,t,n){},133:function(e,t,n){},307:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(55),a=n.n(i),d=(n(127),n(6)),l=n(112),c=n(113),u=n(120),m=n(114),p=n(121),s=n(23);var f=function(e){var t=e.item,n=e.onDelete,o=e.onDone;return r.a.createElement("div",{style:{backgroundColor:t.get("colors"),opacity:t.get("deleting")?.3:1}},r.a.createElement("div",{style:{width:"200px",display:"inline-block"}},t.get("value")),r.a.createElement("div",{style:{width:"50px",display:"inline"}},t.get("priority")),r.a.createElement("input",{type:"checkbox",defaultChecked:!0===t.get("done"),onChange:function(e){return o(!t.get("done"))}}),!1===t.get("deleting")?r.a.createElement("div",{style:{display:"inline"}},r.a.createElement(s.b,{to:"/todo/"+t.get("id")},"Show"),r.a.createElement("button",{onClick:n},"Delete")):null)},v=n(116);function y(e,t,n,o){var r;n&&(r=Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])})).join("&")),Object(v.ajax)({url:"http://localhost:3030/todos"+t,method:e,body:r},(function(e,t){try{if(e>=200&&e<300&&o)return o(JSON.parse(t))}catch(n){console.log(n)}}))}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return{type:"CHANGE_FLAG",id:e,deleting:t,done:n}}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function(o){void 0!==n&&y("PATCH","/"+e,{done:n},(function(t){o(E(e,void 0,"true"===t.done))})),void 0!==t&&o(E(e,t,void 0))}}var g=Object(d.connect)((function(e,t){return{item:e.todos.get(""+t.id)}}),(function(e,t){return{onDelete:function(){return e((n=t.id,function(e){e(b(n,!0,void 0)),y("DELETE","/"+n,{},(function(t){e(function(e){return{type:"DEL_TODO",todoID:e}}(n))}))}));var n},onDone:function(n){return e(b(t.id,void 0,n))}}}))(f),h=(n(133),n(117)),O=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null," SUM: ",this.props.sum),"First: ",r.a.createElement("br",null),this.props.todos.map((function(e){return r.a.createElement(g,{key:e,id:e})})),r.a.createElement("hr",null),r.a.createElement("div",null,this.props.todosByName.map((function(e){return r.a.createElement(g,{key:e,id:e})}))),r.a.createElement(h.Link,{to:"/newtodo"},"New todo"))}}]),t}(o.Component);var D=Object(d.connect)((function(e,t){return console.log(e.todos),{todos:e.todos.keySeq(),todosByName:e.todos.toList().sortBy((function(e){return parseInt(e.get("priority"),10)})).map((function(e){return e.get("id")})),sum:e.todos.toList().map((function(e){return e.get("priority")})).reduce((function(e,t){return parseInt(t,10)+parseInt(e,10)}))}}),(function(e,t){return{}}))(O),T=n(20),j=n(14);var S=n(19),A=n(118),_=n(30),k=n(119),w=Object(S.createStore)(Object(S.combineReducers)({form:_.reducer,todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(j.fromJS)({}),t=arguments.length>1?arguments[1]:void 0;if("ADD_TODO"===t.type){var n=Object.assign({},t.newTodo,{deleting:!1});return e.set(""+t.newTodo.id,Object(j.fromJS)(n))}if("UPDATE_TODO"===t.type)return e.set(""+t.todo.id,Object(j.fromJS)(t.todo));if("DEL_TODO"===t.type)return e.delete(t.todoID);if("MASS_ADD_TODO"===t.type){var o=e;return t.todos.forEach((function(e){var t=Object.assign({},e,{deleting:!1});o=o.set(""+e.id,Object(j.fromJS)(t))})),o}if("CHANGE_FLAG"===t.type){var r=e;return"undefined"!==typeof t.deleting&&(r=r.setIn([""+t.id,"deleting"],t.deleting)),"undefined"!==typeof t.done&&(r=r.setIn([""+t.id,"done"],t.done)),r}return e}}),Object(A.composeWithDevTools)(Object(S.applyMiddleware)(k.a))),x=n(39),C=function(e){var t=e.input,n=e.label,o=e.type,i=e.meta,a=i.touched,d=i.error,l=i.warning;return r.a.createElement("div",null,r.a.createElement("label",null,n),r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{type:o,placeholder:n})),a&&(d&&r.a.createElement("span",null,d)||l&&r.a.createElement("span",null,l))))},F=Object(x.reduxForm)({form:"addTodoForm"})((function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement(x.Field,{type:"text",name:"value",placeholder:"Title",component:C,label:"Todo Title"}),r.a.createElement(x.Field,{type:"text",name:"priority",placeholder:"Priority",component:C,style:{width:10},label:"Priority"}),r.a.createElement("button",{type:"submit"},"Add / Update"))}));var P=function(e){var t=e.item,n=e.onUpdateTodo;return t?r.a.createElement("div",null,r.a.createElement("h1",null,t.get("value")),r.a.createElement("p",null,"Done: ",t.get("done")?"true":"false"),r.a.createElement("p",null,"Priority: ",t.get("priority")),r.a.createElement(F,{enableReinitizalize:!0,keepDirtyOnReinitizalize:!0,initialValues:t,onSubmit:n}),r.a.createElement(s.b,{to:"/"},"Back")):r.a.createElement(T.Redirect,{to:"/"})};var I=Object(d.connect)((function(e,t){return{item:e.todos.get(""+t.match.params.id)}}),(function(e,t){return{onUpdateTodo:function(t){return e((n=t,function(e){var t=n.toJS();delete t.id,delete t.deleting,t.colors=t.priority<=2?"red":"green",y("PATCH","/"+n.get("id"),t,(function(t){t.id=t._id,t.done=n.get("done"),t.deleting=n.get("deleting"),delete t._id,e(function(e){return{type:"UPDATE_TODO",todo:e}}(t))}))}));var n}}}))(P),J=Object(_.reduxForm)({form:"addTodoForm"})((function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement(_.Field,{type:"text",name:"value",placeholder:"Title",component:C,label:"Todo Title"}),r.a.createElement(_.Field,{type:"text",name:"priority",placeholder:"Priority",component:C,style:{width:10},label:"Priority"}),r.a.createElement("button",{type:"submit"},"Add"))}));var R=function(e){var t=e.onAddTodo;return r.a.createElement("form",null,r.a.createElement(J,{onSubmit:t}),r.a.createElement(s.b,{to:"/"},"Back"))};var L=Object(d.connect)((function(e,t){return{}}),(function(e,t){return{onAddTodo:function(t){return e(function(e){return function(t){var n=e.get("priority")<=2?"red":"green",o=e.set("colors",n);y("POST","",(o=o.set("done",!1)).toJS(),(function(e){e.id=e._id,delete e._id,e.done="true"===e.done,t({type:"ADD_TODO",newTodo:e})}))}}(t))}}}))(R);a.a.render(r.a.createElement(d.Provider,{store:w},r.a.createElement(s.a,null,r.a.createElement(T.Route,{exact:!0,path:"/",component:D}),r.a.createElement(T.Route,{path:"/todo/:id",component:I}),r.a.createElement(T.Route,{path:"/newtodo",component:L}))),document.getElementById("root")),y("GET","",{},(function(e){w.dispatch({type:"MASS_ADD_TODO",todos:e.map((function(e){return e.id=e._id,delete e._id,e.done="true"===e.done,e}))})}))}},[[122,1,2]]]);
//# sourceMappingURL=main.ffc10abe.chunk.js.map